<script>
    let loaded = $state(false);

    let padding = $state(30);
    let actualWidth = $state(0);
    let width = $derived(actualWidth - padding * 2);
    
    let yearStart = 1900;
    let yearEnd = 1975;
    let yearStep = 25;

    let steps = (yearEnd - yearStart) / yearStep;
    let stepWidth = $derived(width / steps);

    let dots = $state([
    1868,
    1873,
    1873,
    1873,
    1889,
    1888,
    1888,
    1868,
    1868,
    1873,
    1873,
    1873,
    1874,
    1874,
    1874,
    1873,
    1888,
    1888,
    1887,
    1887,
    1888,
    1887,
    1867,
    1867,
    1873,
    1873,
    1873,
    1873,
    1876,
    1877,
    1877,
    1877,
    1887,
    1887,
    1886,
    1886,
    1887,
    1887,
    1867,
    1867,
    1867,
    1867,
    1873,
    1873,
    1867,
    1877,
    1877,
    1883,
    1883,
    1883,
    1886,
    1885,
    1886,
    1886,
    1887,
    1885,
    1885,
    1866,
    1866,
    1866,
    1867,
    1883,
    1882,
    1883,
    1882,
    1883,
    1885,
    1885,
    1885,
    1884,
    1885,
    1866,
    1867,
    1879,
    1878,
    1879,
    1878,
    1880,
    1880,
    1882,
    1882,
    1882,
    1883,
    1884,
    1885,
    1884,
    1884,
    1885,
    1884,
    1885,
    1868,
    1885,
    1869,
    1869,
    1869,
    1869,
    1880,
    1880,
    1880,
    1880,
    1881,
    1881,
    1881,
    1881,
    1884,
    1884,
    1883,
    // "",
    1872,
    1884,
    1884,
    1884,
    1884,
    1870,
    1870,
    1870,
    1870,
    1871,
    1879,
    1871,
    1871,
    1881,
    1881,
    1881,
    1881,
    1883,
    1883,
    1883,
    1872,
    1871,
    1871,
    1872,
    1872,
    1872,
    1880,
    1880,
    1875,
    1875,
    1878,
    1879,
    1878,
    1879,
    1881,
    1889,
    1888,
    1872,
    1872,
    1872,
    1872,
    1875,
    1875,
    1875,
    1875,
    1876,
    1876,
    1876,
    1876,
    1878,
    1878,
    1877,
    1878,
    1889,
    1889,
    1889,
    1889,
    1874,
    1874,
    1874,
    1874,
    1874,
    1879,
    1880,
    1880,
    1890,
    1889,
    1890,
    1890,
    1891,
    1890,
    1891,
    1891,
    1891,
    1891,
    1891
]);

let dots2 = $state([
    1917,
    1916,
    1916,
    1917,
    1917,
    1917,
    1917,
    1917,
    1917,
    1915,
    1915,
    1915,
    1916,
    1920,
    1914,
    1920,
    1867,
    1922,
    1923,
    1922,
    1922,
    1920,
    1921,
    1920,
    1921,
    1920,
    1920,
    1920,
    1921,
    1922,
    1923,
    1925,
    1925,
    1925,
    1923,
    1923,
    1923,
    1923,
    1926,
    1926,
    1926,
    1926,
    1925,
    1926,
    1925,
    1925,
    1922,
    1922,
    1922,
    1922,
    1923,
    1923,
    1924,
    1923,
    1929,
    1929,
    1941,
    "",
    1941,
    1899,
    1899,
    1925,
    1924,
    1925,
    1920,
    1928,
    1942,
    1936,
    1937,
    1937,
    1928,
    1928,
    1918,
    1918,
    1918,
    1940,
    1919,
    1920,
    1928,
    1928,
    1928,
    1928,
    1935,
    1935,
    "",
    1929,
    1929,
    1929,
    1929,
    1911,
    1935,
    1936,
    1882,
    "",
    1920,
    "",
    1882,
    1921,
    1934,
    1934,
    1934,
    1934,
    1934,
    1929,
    1934,
    1929,
    1928,
    1928,
    1928,
    1913,
    1914,
    1911,
    1911,
    1912,
    1912,
    "",
    1910,
    1906,
    1908,
    1909,
    "1911 en 1912",
    1928,
    1911,
    1928,
    1930,
    1929,
    1927,
    1915,
    1915,
    1915,
    1914,
    1914,
    1929,
    1913,
    1929,
    1926,
    1926,
    1926,
    1926,
    1925,
    1925,
    1925,
    1925,
    1928,
    1928,
    1928,
    1928,
    1894,
    1894,
    1892,
    1892,
    1892,
    1926,
    1926,
    1926,
    1932,
    1932,
    1927,
    1927,
    1927,
    1933,
    1928,
    1930,
    1930
])

let dots3 = $state([
    1941,
    1947,
    1941,
    1946,
    1946,
    1946,
    1947,
    1941,
    1942,
    1947,
    1948,
    1935,
    1935,
    1935,
    1940,
    1948,
    0,
    1947,
    0,
    1947,
    0,
    1953,
    1951,
    1946,
    1952,
    1957,
    0,
    0,
    1953,
    0,
    1951,
    1947,
    1944,
    1954,
    1934,
    1937,
    1959,
    1951,
    1959,
    1943,
    1956,
    1950,
    1952,
    1942,
    1952,
    0,
    0,
    1954,
    0,
    1959,
    1959,
    1959,
    1952,
    1953,
    1953,
    1959,
    1959,
    null,
    0,
    1960,
    1956,
    1964,
    1941,
    1952,
    1954,
    1954,
    1951,
    null,
    null,
    1952,
    1959,
    1960,
    0,
    0,
    0,
    1946,
    0,
    1959,
    1959,
    1950,
    1961,
    1960,
    1959,
    1965,
    1966,
    1953,
    null,
    1958,
    1960,
    null,
    null,
    1936,
    1936,
    1937,
    1936,
    null,
    1949,
    1959,
    null,
    1958,
    1953,
    1954
]);

let dots4 = $state(
    [
    1964,
    1964,
    1964,
    1964,
    1955,
    1959,
    1966,
    1966,
    1964,
    1964,
    1966,
    1966,
    null,
    null,
    null,
    null,
    1966,
    1967,
    1967,
    null,
    null,
    null,
    1966,
    1969,
    1968,
    1967,
    1969,
    1974,
    1976,
    1977,
    1978,
    1968,
    1969,
    null,
    1967,
    1968,
    1958,
    1964,
    1967,
    1968,
    1968,
    1964,
    null,
    1967,
    1967,
    1962,
    1974,
    1976,
    1978,
    1978,
    1977,
    1970,
    1970,
    1969,
    1970,
    1969,
    1968,
    1974,
    1974,
    1975,
    1977,
    1977,
    1970,
    1971,
    1971,
    1960,
    1967,
    1969,
    1973,
    1973,
    1977,
    1977,
    1978,
    1970,
    1970,
    1970,
    1970,
    1969,
    1965,
    1973,
    1973,
    1974,
    1974,
    1971,
    1971,
    1971,
    1972,
    1971,
    1969,
    1966,
    1972,
    1973,
    1975,
    1975,
    1971,
    1971,
    1971,
    1971,
    1972,
    1973,
    1975,
    1976,
    1965,
    1968,
    1968,
    1970,
    1969,
    1970
]
);

let dots5 = $state(
    [
    1971,
    1972,
    1972,
    1973,
    1974,
    1974,
    1972,
    1972,
    1973,
    1975,
    1976,
    1977,
    1976,
    1983,
    1972,
    1971,
    null,
    1975,
    1975,
    1978,
    1978,
    1983,
    1983,
    1972,
    1969,
    1974,
    null,
    1989,
    1988,
    null,
    1982,
    1982,
    1988,
    1987,
    1976,
    1989,
    1988,
    1978,
    1982,
    1984,
    1983,
    1986,
    1986,
    1987,
    1989,
    1989,
    1988,
    1979,
    1980,
    1981,
    1983,
    1983,
    1987,
    1987,
    1987,
    1987,
    1980,
    1981,
    1981,
    1981,
    1982,
    1985,
    1986,
    1986,
    1987,
    1987,
    1978,
    1979,
    1979,
    1983,
    1985,
    1985,
    1985,
    1985,
    1978,
    1978,
    1979,
    1984,
    1985,
    1985,
    1985,
    1986,
    1986,
    1986,
    1978,
    1979,
    1979,
    1985,
    1985,
    1985,
    1986,
    1986,
    1986,
    1986,
    1986
]
);
    // for(let i = 0; i < 80; ++i) {
    //     dots.push(Math.random() * (yearEnd - yearStart) + yearStart | 0);
    // }

    function yearToScreen(year) {
        return (year - yearStart) / (yearEnd - yearStart) * width + padding;
    }

    $effect(() => {
        loaded = true;
    });
</script>


<svg height="50" width="100%" bind:clientWidth={actualWidth}>
    {#if loaded}
    {#each dots as dot} 
        <!-- <circle cx={yearToScreen(dot)} cy={Math.random() * 10 + 20} r="4" fill={`hsl(${dot - 1650},100%,50%)`} stroke="#fff" stroke-width="1"></circle> -->
        <!-- <circle cx={yearToScreen(dot)} cy={Math.random() * 10 + 20} r="4" fill="#f4a" stroke="#fff" stroke-width="1"></circle> -->
    {/each}
    {#each dots2 as dot} 
        <!-- <circle cx={yearToScreen(dot)} cy={Math.random() * 10 + 20} r="4" fill={`hsl(${dot - 1650},100%,50%)`} stroke="#fff" stroke-width="1"></circle> -->
        <!-- <circle cx={yearToScreen(dot)} cy={Math.random() * 10 + 20} r="4" fill="#f4a" stroke="#fff" stroke-width="1"></circle> -->
    {/each}
    {#each dots3 as dot} 
        <!-- <circle cx={yearToScreen(dot)} cy={Math.random() * 10 + 20} r="4" fill={`hsl(${dot - 1650},100%,50%)`} stroke="#fff" stroke-width="1"></circle> -->
        <circle cx={yearToScreen(dot)} cy={Math.random() * 10 + 20} r="4" fill="#f4a" stroke="#fff" stroke-width="1"></circle>
    {/each}
    {#each dots4 as dot} 
        <!-- <circle cx={yearToScreen(dot)} cy={Math.random() * 10 + 20} r="4" fill={`hsl(${dot - 1650},100%,50%)`} stroke="#fff" stroke-width="1"></circle> -->
        <!-- <circle cx={yearToScreen(dot)} cy={Math.random() * 10 + 20} r="4" fill="#f4a" stroke="#fff" stroke-width="1"></circle> -->
    {/each}
    {#each dots5 as dot} 
        <!-- <circle cx={yearToScreen(dot)} cy={Math.random() * 10 + 20} r="4" fill={`hsl(${dot - 1650},100%,50%)`} stroke="#fff" stroke-width="1"></circle> -->
        <!-- <circle cx={yearToScreen(dot)} cy={Math.random() * 10 + 20} r="4" fill="#f4a" stroke="#fff" stroke-width="1"></circle> -->
    {/each}
        {#each {length: steps} as _, i}

            <text style:font="normal 14px sans-serif" x={i * stepWidth + padding - 17} y={35}>{yearStart + yearStep * i}</text>
            <line x1={i * stepWidth + padding} y1="40" x2={i * stepWidth + padding} y2="50" stroke="#222" stroke-width="1" />
            {#each { length: 25} as _, j}
                <line x1={i * stepWidth + j * (stepWidth / 25) + padding} y1="45" x2={i * stepWidth + j * (stepWidth / 25) + padding} y2="50" stroke="#222" stroke-width="1" />
            {/each}
        {/each}
        <text style:font="normal 14px sans-serif" x={steps * stepWidth + padding - 17} y={35}>{yearStart + yearStep * steps}</text>
        <line x1={steps * stepWidth + padding} y1="40" x2={steps * stepWidth + padding} y2="50" stroke="#222" stroke-width="1" />

        <!-- {#each [1850,1875,1900,1925,1950,1975] as year, i}
            <text style:font="normal 14px sans-serif" x={i * 200 + 5} y={30}>{year}</text>
            <line x1={i * 200 + 25} y1="40" x2={i * 200 + 25} y2="50" stroke="#222" stroke-width="2" />
            {#each { length: 25} as _, j}
            <line x1={i * 200 + j * 8 + 25} y1="45" x2={i * 200 + j * 8 + 25} y2="50" stroke="#222" stroke-width="2" />
            {/each}
        {/each} -->
    {/if}
</svg>